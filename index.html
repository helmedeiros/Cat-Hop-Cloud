<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Cat Hop Cloud</title>
<style>
body {
    margin: 0;
    padding: 0;
    background: #87CEEB;
    overflow: hidden;
    font-family: monospace;
}
canvas {
    display: block;
    margin: 0 auto;
}
#info {
    position: absolute;
    top: 10px;
    left: 10px;
    color: #fff;
    font-size: 18px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
}
#menu {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.95);
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    text-align: center;
    max-width: 400px;
}
#menu h2 {
    margin-top: 0;
    color: #333;
}
#menu p {
    margin: 10px 0;
    color: #555;
    line-height: 1.6;
}
#menu button {
    background: #CC88FF;
    color: white;
    border: none;
    padding: 10px 20px;
    font-size: 18px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
    font-family: monospace;
}
#menu button:hover {
    background: #AA66DD;
}
.cloud-info {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin: 15px 0;
}
.cloud-example {
    display: flex;
    align-items: center;
    gap: 10px;
}
</style>
</head>
<body>
<div id="info">Luck: <span id="energy">100</span></div>
<canvas id="c"></canvas>
<div id="menu">
    <h2>Cat Hop Cloud</h2>
    <p><strong>Help your cat return home!</strong></p>
    <p>Your black cat is lost in the clouds and needs to use its luck energy to hop back to cloud 0.</p>
    
    <div class="cloud-info">
        <div class="cloud-example">
            <span style="color: #CC88FF;">‚óè</span> Safe clouds
        </div>
        <div class="cloud-example">
            <span style="color: #FF4444;">‚óè</span> Thunder clouds (-2 luck)
        </div>
    </div>
    
    <p><strong>Controls:</strong></p>
    <p>üéÆ Press 1-9 to jump that many clouds forward<br>
    Each jump costs luck equal to the distance<br>
    üìç Press R to reset the game<br>
    üí° Press I to toggle instructions</p>
    
    <p><strong>Goal:</strong> Return to cloud 0 with luck remaining!</p>
    
    <div id="scoreboard" style="margin-top: 20px;">
        <h3>Best Scores</h3>
        <div id="scoreList"></div>
    </div>
    
    <button onclick="startGame()">Start Game</button>
</div>
<script>
// Game constants
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
const energyDisplay = document.getElementById('energy');

// Set canvas size
canvas.width = 800;
canvas.height = 600;

// Game state
let gameState = {
    energy: 100,
    position: 0,
    clouds: [0, 0, 1, 0, 1, 1, 0, 0], // 0 = safe, 1 = thundercloud
    numClouds: 8,
    gameOver: false,
    gameWon: false,
    showMenu: true
};

// Load best scores from localStorage
function loadScores() {
    const saved = localStorage.getItem('catHopScores');
    return saved ? JSON.parse(saved) : [];
}

// Save score
function saveScore(score) {
    let scores = loadScores();
    scores.push({
        score: score,
        date: new Date().toLocaleDateString()
    });
    // Keep only top 5 scores
    scores.sort((a, b) => b.score - a.score);
    scores = scores.slice(0, 5);
    localStorage.setItem('catHopScores', JSON.stringify(scores));
    return scores;
}

// Cloud positions (circular arrangement)
function getCloudPosition(index) {
    const angle = (index * Math.PI * 2 / gameState.numClouds) - Math.PI / 2;
    const radius = 200;
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    
    return {
        x: centerX + radius * Math.cos(angle),
        y: centerY + radius * Math.sin(angle)
    };
}

// Draw cloud
function drawCloud(x, y, isThunder, number) {
    // Cloud shape
    ctx.save();
    
    if (isThunder) {
        // Red thundercloud
        ctx.fillStyle = '#FF4444';
    } else {
        // Purple safe cloud
        ctx.fillStyle = '#CC88FF';
    }
    
    // Simple cloud shape with circles
    ctx.beginPath();
    ctx.arc(x - 20, y, 20, 0, Math.PI * 2);
    ctx.arc(x + 20, y, 20, 0, Math.PI * 2);
    ctx.arc(x, y - 10, 25, 0, Math.PI * 2);
    ctx.fill();
    
    // Cloud number
    ctx.fillStyle = '#000';
    ctx.font = 'bold 24px monospace';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(number, x, y);
    
    // Lightning symbol for thunderclouds
    if (isThunder) {
        ctx.strokeStyle = '#FFFF00';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(x, y + 25);
        ctx.lineTo(x - 5, y + 35);
        ctx.lineTo(x + 5, y + 35);
        ctx.lineTo(x, y + 45);
        ctx.stroke();
    }
    
    ctx.restore();
}

// Draw cat
function drawCat(x, y) {
    ctx.save();
    ctx.fillStyle = '#000';
    
    // Body
    ctx.fillRect(x - 10, y - 10, 20, 15);
    
    // Head
    ctx.beginPath();
    ctx.arc(x, y - 15, 8, 0, Math.PI * 2);
    ctx.fill();
    
    // Ears
    ctx.beginPath();
    ctx.moveTo(x - 8, y - 18);
    ctx.lineTo(x - 5, y - 25);
    ctx.lineTo(x - 2, y - 18);
    ctx.moveTo(x + 2, y - 18);
    ctx.lineTo(x + 5, y - 25);
    ctx.lineTo(x + 8, y - 18);
    ctx.fill();
    
    // Tail
    ctx.beginPath();
    ctx.moveTo(x + 10, y);
    ctx.quadraticCurveTo(x + 20, y - 10, x + 15, y - 20);
    ctx.lineWidth = 3;
    ctx.stroke();
    
    ctx.restore();
}

// Jump to new cloud
function jump(k) {
    if (gameState.gameOver || gameState.gameWon) return;
    
    if (gameState.energy >= k) {
        // Deduct energy for jump
        gameState.energy -= k;
        
        // Move to new position (circular)
        gameState.position = (gameState.position + k) % gameState.numClouds;
        
        // Check if landed on thundercloud
        if (gameState.clouds[gameState.position] === 1) {
            gameState.energy -= 2;
        }
        
        // Update energy display
        energyDisplay.textContent = gameState.energy;
        
        // Check win/lose conditions
        if (gameState.position === 0 && gameState.energy > 0) {
            gameState.gameWon = true;
            saveScore(gameState.energy);
        } else if (gameState.energy <= 0) {
            gameState.gameOver = true;
        }
        
        draw();
    }
}

// Handle keyboard input
document.addEventListener('keydown', (e) => {
    const key = e.key;
    
    // Don't process game controls if menu is showing
    if (gameState.showMenu && key.toLowerCase() !== 'i') return;
    
    // Number keys for jumping
    if (key >= '1' && key <= '9') {
        jump(parseInt(key));
    }
    
    // Other controls
    switch(key.toLowerCase()) {
        case 'i': // Toggle instructions
            toggleMenu();
            break;
        case 'r': // Reset game
            resetGame();
            break;
        case 'h': // Hint - show optimal path
            showHint();
            break;
    }
});

// Show hint (optimal path calculation)
function showHint() {
    // Simple hint: show which jumps are safe
    console.log('Hint: Try to avoid red clouds!');
}

// Reset game
function resetGame() {
    gameState.energy = 100;
    gameState.position = 0;
    gameState.gameOver = false;
    gameState.gameWon = false;
    energyDisplay.textContent = gameState.energy;
    draw();
}

// Main draw function
function draw() {
    // Clear canvas
    ctx.fillStyle = '#87CEEB';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // Draw all clouds
    for (let i = 0; i < gameState.numClouds; i++) {
        const pos = getCloudPosition(i);
        drawCloud(pos.x, pos.y, gameState.clouds[i] === 1, i);
    }
    
    // Draw cat at current position
    const catPos = getCloudPosition(gameState.position);
    drawCat(catPos.x, catPos.y);
    
    // Draw game status
    if (gameState.gameWon) {
        ctx.fillStyle = '#00FF00';
        ctx.font = 'bold 48px monospace';
        ctx.textAlign = 'center';
        ctx.fillText('You Win!', canvas.width / 2, canvas.height / 2);
        ctx.font = '24px monospace';
        ctx.fillText(`Final Luck: ${gameState.energy}`, canvas.width / 2, canvas.height / 2 + 40);
    } else if (gameState.gameOver) {
        ctx.fillStyle = '#FF0000';
        ctx.font = 'bold 48px monospace';
        ctx.textAlign = 'center';
        ctx.fillText('Game Over!', canvas.width / 2, canvas.height / 2);
        ctx.font = '24px monospace';
        ctx.fillText('Out of luck!', canvas.width / 2, canvas.height / 2 + 40);
    }
    
    // Draw instructions
    ctx.fillStyle = '#000';
    ctx.font = '14px monospace';
    ctx.textAlign = 'left';
    ctx.fillText('Press 1-9 to jump clouds | R to reset | I for instructions', 10, canvas.height - 10);
}

// Toggle menu visibility
function toggleMenu() {
    gameState.showMenu = !gameState.showMenu;
    document.getElementById('menu').style.display = gameState.showMenu ? 'block' : 'none';
    if (gameState.showMenu) {
        updateScoreboard();
    } else {
        draw();
    }
}

// Update scoreboard display
function updateScoreboard() {
    const scores = loadScores();
    const scoreList = document.getElementById('scoreList');
    
    if (scores.length === 0) {
        scoreList.innerHTML = '<p style="color: #888;">No scores yet!</p>';
    } else {
        scoreList.innerHTML = scores.map((s, i) => 
            `<div style="margin: 5px 0;">${i + 1}. Luck: ${s.score} - ${s.date}</div>`
        ).join('');
    }
}

// Start game from menu
function startGame() {
    gameState.showMenu = false;
    document.getElementById('menu').style.display = 'none';
    resetGame();
}

// Initialize
draw();
if (gameState.showMenu) {
    document.getElementById('menu').style.display = 'block';
    updateScoreboard();
}
</script>
</body>
</html>